# About DNS Blocker

`DNS` レベルで広告やトラッカーをブロックできるのがメリット。

特に、ブラウザ以外のソフトウェア、ゲーム、`PC` 以外のデバイス、IOT家電等、インターネットに接続する可能性のあるデバイス全てに適用できるのが大きい。

ブラウザは、`FireFox`系 ＋ `uBlockOrigin` 環境では無意味だが、`Chromium` であれば効果あり。

`DNS` ブロッカーをいくつか試したが、どのプロジェクトも大きなデメリットとしてリクエスト先の情報が必ず一度外部の `DNS` サーバーに送られてしまうと点がある。たとえ、そのデータを一切二次利用しないと公言していても、セキュリティ上の懸念やプライバシーの問題は解決されない。

そこに現れた救世主が、`Adguard Home` です。


# Adguard Home

サーバーをローカルで管理できる唯一無二の `DNS` ブロッカー。

全てのデータはユーザーの管理下に置かれます。

現在まだ正式にリリースには至っていませんが、`GitHub` からダウンロードして利用することができます。


# Installation

[How to install program manually](https://github.com/AdguardTeam/AdGuardHome/wiki/Getting-Started)

まず初めに、以下のコマンドで `Adguard Home` を起動する。

```Powershell
sudo .\AdGuardHome
```

ここで表示されるポートナンバー `3000` のアドレスを開くと、初期設定が始まります。（例：127.0.0.1:3000）

案内に従って設定を終えたら、コントロールパネルを開いてネットワークの設定画面で、`DNS` を現在開いている `LocalHost` の `IP` アドレスに設定します。


# Register as service

次に、Adguard Home をサービスに登録する。

```Powershell
sudo .\AdGuardHome -s install
```


# Web interface（管理ページ）

これでセットアップは完了です。

次に、普段統計データを確認したり、追加の設定をしたりするための管理ページである、`Web interface` を開いてみましょう。

ブラウザで、`localhost` のポートナンバー `80` にアクセスします。（例：127.0.0.1:80）

すると、画面に統計データが表示されると思います。これがメインの管理ページになります。


### フィルタ設定

フィルタは、`uBlockOrigin` で利用しているものと同じものを設定する

管理ページで、フィルタ -> `DNS` ブロックリストを選択し、手動でフィルタへのリンクを追加します


### クエリ・ログ

ここで、全てのログが確認できます。個別にブロックしたり解除したりできます。

各クエリのレコードの右端の空欄にカーソルをもっていくと、ブロックの項目が現れます。すでにブロック済みの場合は、解除ボタンが表示されます。

ここで、ブロックしたり解除したものは、フィルタ設定の「カスタム・フィルタリングルール」の一覧に自動で追加されます。もちろん、ここに手動で書き込んでも大丈夫です。


### サービス単位でのブロック

フィルタ設定の項目に「ブロックするサービス」というものがあります。

ここでは、サービス単位でアクセスを禁止することができます。

たとえば、`facebook` をブロックすると、テレメトリー等関係なく全ての `facebook` に関連するドメインへのアクセスがブロックされます。

注意：`Amazon` や `CloudFlare` をブロックすると、`AWS` のようなホスティングサービスや コンテンツを配信する `CDN` 等もブロックされ、多くのサービスが利用できなくなる可能性があります。自身が利用しているサービスにこれらが含まれていないか確認してからブロックするか、万が一意図せずしてブロックされてしまった場合は、ログからブロックされたレコードを探して解除してください。
